<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
<!-- Animate.css -->
<link rel="stylesheet" type="text/css" href="css/animate.css">
<!-- Font Awesome -->
<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
<!--Main Style-->
<link rel="stylesheet" type="text/css" href="css/cardio.css">
<script src="../../assets/js/ie-emulation-modes-warning.js"></script>


<div class="row services">
    <div class="col-md-4" *ngFor="let env of Environments2">
        <div class="service" (mouseenter)='getStatusSummary(env.name)' (click)='env.expanded = !env.expanded' [class.opend]='env.expanded'>
            <div class="icon-holder">
                <span class="fa status-{{env.state}} fa-3x"></span>
                <!--add env status logo-->
            </div>
            <h4 class="heading">{{env.name}}</h4>
            <div *ngIf="env.summary">
                <p class="description" *ngFor="let machine of env.summary">
                    <span class="open-blink open-blink-{{machine.status}}" (click)="getDetailedStatus(env.name, machine);machine.expanded = !machine.expanded; modal.open();"
                        data-toggle="tooltip" data-placement="top" title={{machine.name}}></span>


                </p>
            </div>
        </div>
    </div>
    <modal #modal>
        <div *ngIf="expandedMachine">

            <modal-header [show-close]="true">
                <h4 class="modal-title">Machine {{expandedMachine.name}} Details</h4>
            </modal-header>
            <modal-body>

                <div class="panel-group">
                    <div class="panel panel-default" *ngFor="let category of expandedMachine.details">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#collapse-{{expandedMachine.name}}-{{category.name.split(' ')[0]}}-{{category.name.split(' ')[1]}}">
                                    {{category.name}}
                                    <div class="open-blink open-blink-{{category.status}}"></div>
                                </a>
                            </h4>
                        </div>

                        <div id="collapse-{{expandedMachine.name}}-{{category.name.split(' ')[0]}}-{{category.name.split(' ')[1]}}" class="panel-collapse collapse">
                            <div class="panel-body">
                                <li class="list-group-item" *ngFor="let data_item of category.data">
                                    <div *ngIf="data_item" (click)="category.expanded  = !category.expanded" id="data_item.status" class="open-blink open-blink-{{data_item.status}} "></div>
                                    {{data_item.msg}} interval : {{data_item.interval}} last : {{data_item.last}}
                                </li>
                            </div>
                        </div>

                    </div>
                </div>

            </modal-body>
            <modal-footer>
                <button type="button" class="btn btn-primary" (click)="modal.close();">Dismiss</button>
            </modal-footer>
        </div>
    </modal>
</div>